<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Gauge Demo</title>

	<script type="text/javascript">
	window.addEventListener("load",eventWindowLoaded,!1);function eventWindowLoaded(){gaugeDemo()};
function Gauge(b,a){this.canvasId=b;this.index=0;this.inputGranularity=a.hasOwnProperty("inputGranularity")?a.inputGranularity:1;if(1<this.inputGranularity||0>=this.inputGranularity)this.inputGranularity=1;this.gaugeNameLn1=a.hasOwnProperty("titleLine1")?a.titleLine1:"";this.gaugeNameLn2=a.hasOwnProperty("titleLine2")?a.titleLine2:"";this.gaugeNmFnt=a.hasOwnProperty("titleFont")?a.titleFont:"18pt Arial";this.gaugeDiam=a.hasOwnProperty("gaugeDiam")?a.gaugeDiam:175;this.rimWidth=a.hasOwnProperty("rimWidth")?
a.rimWidth:25;this.faceColor=a.hasOwnProperty("faceColor")?a.faceColor:"white";this.centerX=a.hasOwnProperty("centerX")?a.centerX:200;this.centerY=a.hasOwnProperty("centerY")?a.centerY:250;this.startDegree=a.hasOwnProperty("startDegree")?a.startDegree:135;this.endDegree=a.hasOwnProperty("endDegree")?a.endDegree:405;this.startRadian=this.startDegree*(Math.PI/180);this.endRadian=this.endDegree*(Math.PI/180);this.outerScaleDiam=a.hasOwnProperty("outerScaleDiam")?a.outerScaleDiam:100;this.outerScaleRange=
a.hasOwnProperty("outerScaleRange")?a.outerScaleRange:{s:0,e:6E3};this.outerScaleIntervals=a.hasOwnProperty("outerScaleIntervals")?a.outerScaleIntervals:[500,100,0];this.outerScaleFnt=a.hasOwnProperty("outerScaleFnt")?a.outerScaleFnt:"8pt Calibri";this.outerScaleColor=a.hasOwnProperty("outerScaleColor")?a.outerScaleColor:"black";this.outerScaleUnit=a.hasOwnProperty("outerScaleUnit")?a.outerScaleUnit:"PSI";this.hasInnerScale=a.hasOwnProperty("hasInnerScale")?a.hasInnerScale:!1;this.innerScaleConvFactor=
a.hasOwnProperty("innerScaleConvFactor")?a.innerScaleConvFactor:0.068573;this.innerScaleDiam=a.hasOwnProperty("innerScaleDiam")?a.innerScaleDiam:96;this.innerScaleStartLabel=a.hasOwnProperty("innerScaleStartLabel")?a.innerScaleStartLabel:0;this.innerScaleIntervals=a.hasOwnProperty("innerScaleIntervals")?a.innerScaleIntervals:[50,10,0];this.innerScaleFnt=a.hasOwnProperty("innerScaleFnt")?a.innerScaleFnt:"8pt Arial";this.innerScaleColor=a.hasOwnProperty("innerScaleColor")?a.innerScaleColor:"red";this.innerScaleUnit=
a.hasOwnProperty("innerScaleUnit")?a.innerScaleUnit:"Kg/cm3";this.innerScaleToEnd=a.hasOwnProperty("innerScaleToEnd")?a.innerScaleToEnd:!0;this.dialBaseDiam=a.hasOwnProperty("dialBaseDiam")?a.dialBaseDiam:25;this.pointerColor=a.hasOwnProperty("pointerColor")?a.pointerColor:"blue";this.maxSteps=(this.outerScaleRange.e-this.outerScaleRange.s)/this.inputGranularity+1;this.lookupTbl=createLookupTbl(this.startRadian,this.endRadian,this.maxSteps);this.innerStepConvRate=this.maxSteps/(this.outerScaleRange.e*
this.innerScaleConvFactor-this.outerScaleRange.s*this.innerScaleConvFactor);this.digWd=a.hasOwnProperty("digWd")?a.digWd:60;this.digHt=a.hasOwnProperty("digHt")?a.digHt:14;this.digFnt=a.hasOwnProperty("digFnt")?a.digFnt:"12pt Calibri";this.digBC=a.hasOwnProperty("digBC")?a.digBC:"#efefef";this.digDispX=this.centerX-this.digWd/2;this.digDispY=this.centerY+this.outerScaleDiam+this.digHt/2;this.maxDigits=Math.floor(this.outerScaleRange.e).toString().length;this.digDispFixed=0;if(1>this.inputGranularity){var c=
this.inputGranularity.toFixed(3).toString(),d=2;"0"==c.substr(c.length-1,1)&&(d++,"0"==c.substr(c.length-2,1)&&d++);this.maxDigits+=d;this.digDispFixed=d-1}this.gaugeNmFS=parseInt(this.gaugeNmFnt.replace(/[^0-9 ]/g,""));this.gaugeNmFS||(this.gaugeNmFS=18);this.outerScaleFS=parseInt(this.outerScaleFnt.replace(/[^0-9 ]/g,""));this.outerScaleFS||(this.outerScaleFS=8);this.innerScaleFS=parseInt(this.innerScaleFnt.replace(/[^0-9 ]/g,""));this.innerScaleFS||(this.innerScaleFS=8);this.digFS=parseInt(this.digFnt.replace(/[^0-9 ]/g,
""));this.digFS||(this.digFS=12);this.gap=(this.centerY+this.outerScaleDiam-(this.centerY+this.dialBaseDiam)-1.25*(this.outerScaleFS+this.innerScaleFS))/7;this.minorUnitY=this.centerY+this.dialBaseDiam+3*this.gap;this.majorUnitY=this.minorUnitY+this.innerScaleFS+this.gap;this.inputLevel=this.outerScaleRange.s;return this}function canvasSupport(b){return!b||!b.getContext?!1:!0}function createLookupTbl(b,a,c){for(var d=[],e=b,b=(a-b)/c,a=0;a<=c;a++)d[a]=[Math.cos(e),Math.sin(e)],e+=b;return d}
function writeMessage(b,a,c,d,e,g,h,f){b.textBaseline=g;b.textAlign=e;b.font=c;b.fillStyle=d;b.fillText(a,h,f)}function drawArc(b,a,c,d,e,g,h,f,j){b.beginPath();b.strokeStyle=f;b.lineWidth=j;b.arc(a,c,d,e,g,h);b.stroke();b.closePath()}function drawTickMark(b,a,c,d,e,g,h){b.beginPath();b.moveTo(g+a*d,h+c*d);b.lineTo(g+a*e,h+c*e);b.stroke();b.closePath()}
function labelStep(b,a,c,d,e,g,h,f){b.setTransform(1,0,0,1,0,0);b.font=f;b.fillStyle=h;b.translate(e,g);b.rotate(a+Math.PI/2);b.textAlign="center";b.translate(0,-1*d);b.fillText(c,0,0);b.rotate(0);b.setTransform(1,0,0,1,0,0)}
function drawOuterSteps(b,a,c,d,e,g,h,f,j,n,k,p,q,l,s){"undefined"===typeof k&&(k=!1);var r,j=j/n,l=l-q;b.strokeStyle=h;b.lineWidth=f;for(f=0;f<a.length;f+=j)drawTickMark(b,a[f][0],a[f][1],c,d,e,g),k&&labelStep(b,q+l*(f/a.length),(f*n+s).toString(),d+15,e,g,h,p),r=f;r<a.length-1&&drawTickMark(b,a[a.length-1][0],a[a.length-1][1],c,d,e,g)}
function drawInnerSteps(b,a,c,d,e,g,h,f,j,n,k,p,q,l,s,r,t){"undefined"===typeof l&&(l=!1);b.strokeStyle=h;b.lineWidth=f;var f=p-k,u=p,i=0,t=t-r;q&&k!=n&&drawTickMark(b,a[i][0],a[i][1],c,d,e,g);for(var m=n;m<=p;m+=j)i=Math.floor((m-k)/f*a.length+0.5),0>i&&(i=0),i>=a.length&&(i=a.length-1),drawTickMark(b,a[i][0],a[i][1],c,d,e,g),l&&labelStep(b,r+t*((m-n)/f),m.toString(),d-2,e,g,h,s),u=m;q&&u<p&&(i=a.length-1,drawTickMark(b,a[i][0],a[i][1],c,d,e,g))}
Gauge.prototype.drawScreen=function(){var b=document.getElementById(this.canvasId);if(canvasSupport(b)){var a=b.getContext("2d");a.clearRect(0,0,b.width,b.height);writeMessage(a,this.gaugeNameLn1,this.gaugeNmFnt,"black","center","top",this.centerX,10);writeMessage(a,this.gaugeNameLn2,this.gaugeNmFnt,"black","center","top",this.centerX,10+1.25*this.gaugeNmFS);drawArc(a,this.centerX,this.centerY,this.gaugeDiam,0,2*Math.PI,!1,"#030303",0.5);b=a.createRadialGradient(this.centerX,this.centerY,this.gaugeDiam,
1.2*this.centerX,1.2*this.centerY,0.75*this.gaugeDiam);b.addColorStop(0,"#222222");b.addColorStop(0.06,"#787878");b.addColorStop(0.1,"#222222");b.addColorStop(0.2,"#000000");a.fillStyle=b;a.fill();drawArc(a,this.centerX,this.centerY,this.gaugeDiam-this.rimWidth,0,2*Math.PI,!1,"#000000",1);a.fillStyle=this.faceColor;a.fill();drawArc(a,this.centerX,this.centerY,this.outerScaleDiam,this.startRadian,this.endRadian,!1,this.outerScaleColor,1.25);drawOuterSteps(a,this.lookupTbl,this.outerScaleDiam,this.outerScaleDiam+
5,this.centerX,this.centerY,this.outerScaleColor,1,this.outerScaleIntervals[0],this.inputGranularity,!0,this.outerScaleFnt,this.startRadian,this.endRadian,this.outerScaleRange.s);0<this.outerScaleIntervals[1]&&drawOuterSteps(a,this.lookupTbl,this.outerScaleDiam,this.outerScaleDiam+3,this.centerX,this.centerY,this.outerScaleColor,1,this.outerScaleIntervals[1],this.inputGranularity);0<this.outerScaleIntervals[2]&&drawOuterSteps(a,this.lookupTbl,this.outerScaleDiam,this.outerScaleDiam+1,this.centerX,
this.centerY,this.outerScaleColor,1,this.outerScaleIntervals[2],this.inputGranularity);if(this.hasInnerScale){var b=this.outerScaleRange.s*this.innerScaleConvFactor,c=this.outerScaleRange.e*this.innerScaleConvFactor;drawArc(a,this.centerX,this.centerY,this.innerScaleDiam,this.startRadian,this.endRadian,!1,this.innerScaleColor,1.25);drawInnerSteps(a,this.lookupTbl,this.innerScaleDiam,this.innerScaleDiam-5,this.centerX,this.centerY,this.innerScaleColor,1,this.innerScaleIntervals[0],this.innerScaleStartLabel,
b,c,this.innerScaleToEnd,!0,this.outerScaleFnt,this.startRadian,this.endRadian);0<this.innerScaleIntervals[1]&&drawInnerSteps(a,this.lookupTbl,this.innerScaleDiam,this.innerScaleDiam-3,this.centerX,this.centerY,this.innerScaleColor,1,this.innerScaleIntervals[1],this.innerScaleStartLabel,b,c,this.innerScaleToEnd);0<this.innerScaleIntervals[2]&&drawInnerSteps(a,this.lookupTbl,this.innerScaleDiam,this.innerScaleDiam-1,this.centerX,this.centerY,this.innerScaleColor,1,this.innerScaleIntervals[2],this.innerScaleStartLabel,
b,c,this.innerScaleToEnd)}drawArc(a,this.centerX,this.centerY,this.dialBaseDiam,0,2*Math.PI,!0,"#000000",1);b=a.createRadialGradient(this.centerX,this.centerY,this.dialBaseDiam,1.2*this.centerX,1.2*this.centerY,0);b.addColorStop(0,"#222222");b.addColorStop(0.02,"#787878");b.addColorStop(0.1,"#222222");b.addColorStop(0.2,"#000000");a.fillStyle=b;a.fill();a.strokeStyle=this.pointerColor;a.lineWidth=1.5;drawTickMark(a,this.lookupTbl[this.index][0],this.lookupTbl[this.index][1],this.dialBaseDiam,this.outerScaleDiam+
15,this.centerX,this.centerY);writeMessage(a,this.innerScaleUnit,this.innerScaleFnt,this.innerScaleColor,"center","top",this.centerX,this.minorUnitY);writeMessage(a,this.outerScaleUnit,this.outerScaleFnt,this.outerScaleColor,"center","top",this.centerX,this.majorUnitY);a.beginPath();a.strokeStyle="black";a.lineWidth=2;a.rect(this.digDispX-5,this.digDispY-3,this.digWd+10,this.digHt+8);a.stroke();a.fillStyle=this.digBC;a.fill();a.closePath();b=""+(this.index*this.inputGranularity).toFixed(this.digDispFixed).toString();
for(c=0;c<this.maxDigits-this.index.toString().length;c++)b="0"+b;writeMessage(a,b.toString(),this.digFnt,this.outerScaleColor,"center","top",this.digDispX+this.digWd/2,this.digDispY)}};Gauge.prototype.setInputLevel=function(b){this.inputLevel=b;this.index=Math.floor((b-this.outerScaleRange.s)/this.inputGranularity);0>this.index&&(this.index=0);this.index>=this.maxSteps&&(this.index=this.maxSteps-1)};function gaugeDemo(){function d(g){var d="btn"+g.toString();e[g]?(e[g]=!1,document.getElementById(d).innerHTML="Start Demo",!e[0]&&!e[1]&&(clearInterval(h),f=500)):(e[g]=!0,document.getElementById(d).innerHTML="Stop Demo",500==f&&(h=setInterval(function(){document.getElementById("lbl").innerHTML="Running demo..."+(f+1).toString();for(var a=0;2>a;a++){var d=0==a?i:j;e[a]&&(b[a].curr<b[a].targ?(b[a].curr+=c[a].outerScaleIntervals[1]*c[a].inputGranularity,b[a].curr>b[a].targ&&(b[a].curr=b[a].targ)):
b[a].curr>b[a].targ?(b[a].curr-=c[a].outerScaleIntervals[1]*c[a].inputGranularity,b[a].curr<b[a].targ&&(b[a].curr=b[a].targ)):b[a].targ=c[a].outerScaleRange.s+Math.round(Math.random()*((c[a].outerScaleRange.e-c[a].outerScaleRange.s)/c[a].inputGranularity)*c[a].inputGranularity));d.setInputLevel(b[a].curr);d.drawScreen()}if(0>f--){clearInterval(h);for(a=0;2>a;a++)e[a]=!1,document.getElementById("btn"+a.toString()).innerHTML="Start Demo";f=500}},100)))}var c=[{inputGranularity:1,titleLine1:"ACCUMULATOR",
titleLine2:"PRESSURE",titleFont:"18pt Arial",gaugeDiam:175,rimWidth:25,faceColor:"white",centerX:200,centerY:250,startDegree:135,endDegree:405,outerScaleDiam:100,outerScaleRange:{s:0,e:6E3},outerScaleIntervals:[500,100,0],outerScaleFnt:"8pt Calibri",outerScaleColor:"black",outerScaleUnit:"PSI",hasInnerScale:!0,innerScaleConvFactor:0.068573,innerScaleDiam:96,innerScaleStartLabel:0,innerScaleIntervals:[50,10,0],innerScaleFnt:"8pt Arial",innerScaleColor:"red",innerScaleUnit:"Kg/cm3",innerScaleToEnd:!0,
dialBaseDiam:25,pointerColor:"blue",digWd:60,digHt:14,digFnt:"12pt Calibri",digBC:"#efefef"},{inputGranularity:1,titleLine1:"RIG AIR",titleLine2:"PRESSURE",titleFont:"18pt Arial",gaugeDiam:175,rimWidth:25,faceColor:"white",centerX:200,centerY:250,startDegree:135,endDegree:405,outerScaleDiam:100,outerScaleRange:{s:0,e:300},outerScaleIntervals:[25,5,0],outerScaleFnt:"8pt Calibri",outerScaleColor:"black",outerScaleUnit:"PSI",hasInnerScale:!0,innerScaleConvFactor:0.068573,innerScaleDiam:96,innerScaleStartLabel:0,
innerScaleIntervals:[1,0.5,0],innerScaleFnt:"8pt Arial",innerScaleColor:"red",innerScaleUnit:"Kg/cm3",innerScaleToEnd:!0,dialBaseDiam:25,pointerColor:"blue",digWd:50,digHt:14,digFnt:"12pt Calibri",digBC:"#efefef"}],e=[!1,!1],b=[{curr:c[0].outerScaleRange.s,targ:c[0].outerScaleRange.s},{curr:c[1].outerScaleRange.s,targ:c[1].outerScaleRange.s}];document.getElementById("btn0").addEventListener("click",function(){d(0)},!1);document.getElementById("btn1").addEventListener("click",function(){d(1)},!1);
var i=new Gauge("canvas",c[0]),j=new Gauge("canvas2",c[1]);j.drawScreen();i.drawScreen();var f=500,h};

	</script>
</head>
<body>
	<div style="position:absolute;top:50px;left:50px;">
		<button id="btn0" type="button" style="float:right;display:inline;margin-top:100px;font-size:14px;">Start Demo</button>
		<canvas id="canvas" width="500" height="500" >
	Your browser does not support HTML5 Canvas
		</canvas>
		
	</div>
	<div style="position:absolute;top:550px;left:50px;">
		<button id="btn1" type="button" style="float:right;display:inline;margin-top:100px;font-size:14px;">Start Demo</button>
		<canvas id="canvas2" width="500" height="500" >
	Your browser does not support HTML5 Canvas
		</canvas>
	</div>
	<div style="position:absolute;top:50px;left:550px;">
		<label id="lbl"></label>
	</div>
</body>
</html>